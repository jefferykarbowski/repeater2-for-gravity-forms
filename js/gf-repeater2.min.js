var gfRepeater_repeater2s={},gfRepeater_submitted=!1;function gfRepeater_getRepeaters(){return!!jQuery(".gform_wrapper").each(function(){var e,r,t={},a=this.id.split("_")[2],i=jQuery(this).children("form").first(),n=0,p=0,o=0,u=0,s=null,d={},l={},f={},c={};return jQuery(this).find(".gfield").each(function(){if(0==p){if(jQuery(this).has(".ginput_container_repeater2").length){if(n+=1,r=jQuery(this),e=r.find(".gform_repeater2"),d=jQuery(e).val())try{d=JSON.parse(d)}catch(e){console.log("Error parsing repeater2Info:",e),d=null}if(d||(d={children:{},start:1,min:1,max:null}),d.children||(d.children={}),jQuery.captures()&&(c=jQuery.captures(e.attr("name"))))try{c=JSON.parse(c),1==n&&c.formId==a&&(gfRepeater_submitted=!0)}catch(e){console.log("Error parsing capturedData:",e),c=null}1==n&&jQuery(i).capture(),p=1}}else{if(jQuery(this).has(".ginput_container_repeater2").length)return!1;if(jQuery(this).has(".ginput_container_repeater2-end").length){var g,h=jQuery(this),_=h.find(".gf_repeater2_add"),m=h.find(".gf_repeater2_remove");jQuery(_).attr("data-form-id",a).attr("data-repeater2-id",n),jQuery(m).attr("data-form-id",a).attr("data-repeater2-id",n),F=a,B=n,jQuery(_).off("click keypress").on("click keypress",function(e){"keypress"===e.type&&13!==e.which||gfRepeater_repeatRepeater(F,B)}),jQuery(m).off("click keypress").on("click keypress",function(e){"keypress"===e.type&&13!==e.which||gfRepeater_unrepeatRepeater(F,B)}),g={add:_,remove:m,data:e,start:r,end:h};var y,R=Number(d.start),j=Number(d.min),Q=Number(d.max);(!R||Q&&R>Q)&&(R=1),(!j||Q&&j>Q)&&(j=1),(!Q||j&&Q&&j>Q)&&(Q=null),y={start:R,min:j,max:Q};var v,k=Number(e.attr("tabindex")),I=null;gfRepeater_submitted&&c&&(I=c.repeatCount),v={repeatCount:1,prevRepeatCount:I,childrenCount:o,paremCount:u,tabIndex:k,inputData:f},t[n]={data:v,settings:y,controllers:g,children:l},p=0,o=0,u=0,s=null,l={},f={},repeater2ChildrenPrePopulate={},repeater2RequiredChildren=null}else{o+=1;var C=jQuery(this),w=(jQuery(this).children(".gfield_label").text(),jQuery(this).attr("id")),b=null;if(w){var x=w.split("_");x.length>2&&(b=x[2])}if(!b)return;var A={},T=[],D=0,N=!1,L=null;d&&d.children&&d.children[b]&&(L=d.children[b]);var V,P,E,S=s;if(!L)return;if(jQuery(this).has(".ginput_container").length){var q=jQuery(this).find(".ginput_container").attr("class").split(/\s+/),O="ginput_container_";jQuery.each(q,function(e,r){r.slice(0,17)==O&&(V=r.slice(17,r.length))})}else jQuery(this).hasClass("gform_hidden")?V="hidden":jQuery(this).hasClass("gsection")&&(V="section");"section"==V&&(s=o,S=null),L.required&&(N=!0),L.inputMask&&(P=L.inputMask),L.conditionalLogic&&((E=L.conditionalLogic).skip=[]),jQuery(this).find(":input").each(function(){D+=1;var e,r=jQuery(this),t=jQuery(this).attr("id"),a=jQuery(this).attr("name"),i=gfRepeater_getInputValue(r),n={};if(a&&(-1==jQuery.inArray(a,T)&&T.push(a),e="[]"==a.slice(-2)?a.slice(0,a.length-2):a,L.prePopulate)){if("checkbox"==V||"radio"==V)n=L.prePopulate;else{var p=e.replace(/^input_/,""),o=null;-1!==p.indexOf(".")&&(o=p.split(".")[1]),n=o&&L.prePopulate[o]?L.prePopulate[o]:o?{}:L.prePopulate}n&&jQuery.each(n,function(e,r){e>u&&(u=Number(e))})}A[D]={element:r,id:t,name:a,defaultValue:i,prePopulate:n}}),l[o]={element:C,id:w,idNum:b,inputs:A,inputCount:D,required:N,type:V,inputMask:P,conditionalLogic:E,parentSection:S},f[b]=T}}var F,B}),0===p&&(t?(gfRepeater_repeater2s[a]=t,!0):void 0)})}function gfRepeater_setRepeaterChildAttrs(e,r,t,a){var i=gfRepeater_repeater2s[e][r];if(!a)a=i.data.repeatCount+1;var n,p,o,u,s=jQuery(t).attr("id").split("-")[0],d=gfRepeater_getIndex(i.children,"id",s),l=jQuery("#gform_wrapper_"+e).hasClass("gform_validation_error");if(d){var f=!1,c=i.children[d],g=c.required,h=c.type,_=c.inputCount,m=c.inputMask,y=i.data.tabIndex,R=s+"-"+r+"-"+a;if(jQuery(t).attr("id",R).attr("data-repeater2-parentId",r).attr("data-repeater2-repeatId",a).attr("data-repeater2-childId",d).addClass("gf_repeater2_child_field"),gfRepeater_replaceShortcodes(t),gfRepeater_doShortcode(t,"count",a),gfRepeater_doShortcode(t,"buttons",i.controllers.add.parent().clone()),gfRepeater_doShortcode(t,"add",i.controllers.add.clone()),gfRepeater_doShortcode(t,"remove",i.controllers.remove.clone()),n=e,p=r,o=a,(u=jQuery(t).find(".gf_repeater2_remove")).attr("data-form-id",n).attr("data-repeater2-id",p).attr("data-repeat-id",o),u.off("click keypress").on("click keypress",function(e){"keypress"===e.type&&13!==e.which||gfRepeater_unrepeatRepeater(n,p,o)}).show(),jQuery(t).find(".gf_repeater2_add").show(),jQuery.each(i.children[d].inputs,function(e,n){var p=this.id,o=this.name,u="";if("radio"==h)var s=gfRepeater_findElementByNameOrId(t,null,p);else s=gfRepeater_findElementByNameOrId(t,o,p);if(s.attr("data-repeater2-inputId",e),p){var d=p+"-"+r+"-"+a;jQuery(s).attr("id",d),jQuery(t).find("label[for^='"+p+"']").attr("for",d)}if(o){if("[]"==o.slice(-2))var c=o.slice(0,o.length-2)+"-"+r+"-"+a+"[]";else c=o+"-"+r+"-"+a;jQuery(s).attr("name",c).attr("tabindex",y)}if(m&&jQuery(s).mask(m),this.prePopulate[a]?u=this.prePopulate[a]:this.prePopulate[0]&&(u=this.prePopulate[0]),u&&("checkbox"!=h&&"radio"!=h||(prePopulateValues=u.split(","),u=-1!==jQuery.inArray(e,prePopulateValues)),gfRepeater_setInputValue(s,u)),window.gformInitDatepicker&&"date"==h&&2==_&&1==e&&(jQuery(s).removeClass("hasDatepicker").datepicker("destroy").siblings(".ui-datepicker-trigger").remove(),setTimeout(function(){window.gformInitDatepicker&&gformInitDatepicker()},100)),window.gformInitTimepicker&&"time"==h&&setTimeout(function(){window.gformInitTimepicker&&gformInitTimepicker()},100),gfRepeater_submitted&&l){if(c){var R=jQuery.captures(c);R&&gfRepeater_setInputValue(s,R)}if(g){if(c){var j=c.replace(".","_").split(/(_|-)/);if("name"==h&&-1==jQuery.inArray(j[4],["3","6"]))return!0;if("address"==h&&-1!==jQuery.inArray(j[4],["2"]))return!0}!gfRepeater_getInputValue(s)&&a<=i.data.prevRepeatCount&&(f=!0)}}}),g){var j=t.children(".gfield_label");t.addClass("gfield_contains_required"),j.has(".gfield_required").length||j.append('<span class="gfield_required">*</span>'),gfRepeater_submitted&&l&&(f?(t.addClass("gfield_error"),t.has(".validation_message").length||t.append('<div class="gfield_description validation_message">This field is required.</div>')):t.removeClass("gfield_error").find(".validation_message").remove())}}}function gfRepeater_resetRepeaterChildrenAttrs(e,r){var t=gfRepeater_select(e,r),a=0;jQuery(t).each(function(){1==jQuery(this).attr("data-repeater2-childid")&&(a+=1),jQuery(this).attr("data-repeater2-repeatid")!==a&&gfRepeater_setRepeaterChildAttrs(e,r,jQuery(this),a)})}function gfRepeater_conditionalLogic_set(e,r,t,a){gfRepeater_conditionalLogic_do(e,r,t,a);var i=gfRepeater_repeater2s[e][r],n=i.children[t].conditionalLogic;jQuery.each(n.rules,function(n,p){var o=p.fieldId,u=gfRepeater_getIndex(i.children,"idNum",o);if(!1!==u)var s=gfRepeater_select(e,r,a,u,"*");else{s=jQuery("#field_"+e+"_"+o+" :input");a=null}jQuery.each(s,function(i,n){jQuery(this).bind("propertychange change click keyup input paste",function(){gfRepeater_conditionalLogic_do(e,r,t,a)})})})}function gfRepeater_conditionalLogic_setAll(e,r,t){var a=gfRepeater_repeater2s[e][r];jQuery.each(a.children,function(a,i){this.conditionalLogic&&gfRepeater_conditionalLogic_set(e,r,a,t)})}function gfRepeater_conditionalLogic_do(e,r,t,a){var i=gfRepeater_repeater2s[e][r],n=i.children[t],p=n.conditionalLogic,o=[t],u=[],s=!1,d=!1;if(jQuery.each(p.rules,function(t,n){var p,o=n.fieldId,s=gfRepeater_getIndex(i.children,"idNum",o);if(!1!==s){var d=i.children[s],l=gfRepeater_select(e,r,a,s);if("checkbox"==d.type||"radio"==d.type)var f=gfRepeater_getChoiceValue(l),c=!0;else f=gfRepeater_getInputValue(gfRepeater_select(e,r,a,s,1)),c=!1}else{var g=jQuery("#field_"+e+"_"+o),h=g.find(":input").first();if(h.is(":checkbox, :radio"))f=gfRepeater_getChoiceValue(g),c=!0;else f=gfRepeater_getInputValue(h),c=!1}c&&(f=-1!==jQuery.inArray(n.value,f)&&n.value),p=gf_matches_operation(f,n.value,n.operator),u.push(p)}),"all"==p.logicType?-1==jQuery.inArray(!1,u)&&(s=!0):-1!==jQuery.inArray(!0,u)&&(s=!0),(s&&"show"!==p.actionType||!s&&"show"==p.actionType)&&(d=!0),"section"==n.type){var l=gfRepeater_getIndex(i.children,"parentSection",t,!0);!1!==l&&(o=o.concat(l))}jQuery.each(o,function(t,n){var p=i.children[n].conditionalLogic,o=gfRepeater_select(e,r,a,n),u=a;if(null==u&&(u="all"),o.length)if(d)o.hide(),p&&-1==jQuery.inArray(u,p.skip)&&p.skip.push(u);else if(o.show(),p&&-1!==jQuery.inArray(u,p.skip)){var s=p.skip.indexOf(u);p.skip.splice(s,1)}}),gfRepeater_updateDataElement(e,r)}function gfRepeater_doShortcode(e,r,t){e.find(".gfRepeater-shortcode-"+r).each(function(){jQuery(this).html(t)})}function gfRepeater_replaceShortcodes(e){jQuery.each(["count","buttons","add","remove"],function(r,t){var a=e.html();e.html(a.replace("[gfRepeater-"+t+"]",'<span class="gfRepeater-shortcode-'+t+'"></span>'))})}function gfRepeater_repeatRepeater(e,r){var t=gfRepeater_repeater2s[e][r];if(t){var a=t.data.repeatCount+1;if(!(t.settings.max&&t.data.repeatCount>=t.settings.max)){jQuery(t.controllers.start).parents("form").trigger("gform_repeater2_before_repeat",[r,a]);var i=gfRepeater_select(e,r).last();jQuery.each(t.children,function(t,a){var n=jQuery(this.element).clone();gfRepeater_resetInputs(e,r,t,n),gfRepeater_setRepeaterChildAttrs(e,r,n),n.insertAfter(i),i.find(".datepicker").removeClass("initialized"),i=n,n.find('input[type="file"]').each(function(){var e=jQuery(this);e.val(""),e.siblings(".ginput_preview").remove(),e.siblings(".gform_fileupload_rules").remove(),window.gformInitFileUpload&&gformInitFileUpload(e)}),n.find(".gfield_time").each(function(){jQuery(this).find("input").val(""),window.gformInitTimepicker&&gformInitTimepicker()})}),gfRepeater_conditionalLogic_setAll(e,r,a),t.data.repeatCount+=1,gfRepeater_updateDataElement(e,r),gfRepeater_updateRepeaterControls(e,r),window.gformInitDatepicker&&gformInitDatepicker(),window.gformInitFileUpload&&gformInitFileUpload(),window.gformInitChosenFields&&gformInitChosenFields(),window.gformInitTimepicker&&gformInitTimepicker(),jQuery(t.controllers.start).parents("form").trigger("gform_repeater2_after_repeat",[r,a])}}}function gfRepeater_unrepeatRepeater(e,r,t){var a=gfRepeater_repeater2s[e][r];if(a&&!(a.data.repeatCount<=a.settings.min)){if(!t)t=a.data.repeatCount;jQuery(a.controllers.start).parents("form").trigger("gform_repeater2_before_unrepeat",[r,t]),jQuery.each(a.children,function(a,i){gfRepeater_select(e,r,t,a).remove()}),a.data.repeatCount-=1,gfRepeater_updateDataElement(e,r),gfRepeater_updateRepeaterControls(e,r),t!==a.data.repeatCount+1&&gfRepeater_resetRepeaterChildrenAttrs(e,r),jQuery(a.controllers.start).parents("form").trigger("gform_repeater2_after_unrepeat",[r,t])}}function gfRepeater_repeatRepeaterTimes(e,r,t){if(!t)t=1;for(i=0;i<t;i++)gfRepeater_repeatRepeater(e,r)}function gfRepeater_unrepeatRepeaterTimes(e,r,t){if(!t)t=1;for(i=0;i<t;i++)gfRepeater_unrepeatRepeater(e,r)}function gfRepeater_setRepeater(e,r,t){var a=gfRepeater_repeater2s[e][r].data.repeatCount;if(t!=a)if(t>a)gfRepeater_repeatRepeaterTimes(e,r,t-a);else if(t<a){gfRepeater_unrepeatRepeaterTimes(e,r,a-t)}}function gfRepeater_updateRepeaterControls(e,r){var t=gfRepeater_repeater2s[e][r];t.settings.max&&(t.data.repeatCount>=t.settings.max?jQuery(t.controllers.add).hide():jQuery(t.controllers.add).show()),t.data.repeatCount<=t.settings.min?jQuery(t.controllers.remove).hide():jQuery(t.controllers.remove).show()}function gfRepeater_resetInputs(e,r,t,a){var i=gfRepeater_repeater2s[e][r];jQuery.each(i.children[t].inputs,function(e,r){var t=this.id,i=this.name,n=this.defaultValue,p=gfRepeater_findElementByNameOrId(a,i,t);p&&gfRepeater_setInputValue(p,n)})}function gfRepeater_select(e,r,t,a,i){var n="div#gform_wrapper_"+e+">form#gform_"+e;return(r||t||a||i)&&(n+=">.gform_body .gform_fields>.gfield.gf_repeater2_child_field"),r&&(n+="[data-repeater2-parentid="+r+"]"),t&&(n+="[data-repeater2-repeatid="+t+"]"),a&&(n+="[data-repeater2-childid="+a+"]"),i&&(n+="*"==i?" [data-repeater2-inputid]":" [data-repeater2-inputid="+i+"]"),jQuery(n)}function gfRepeater_findElementByNameOrId(e,r,t){if(r)var a=jQuery(e).find("[name^='"+r+"']");if(!a&&t)a=jQuery(e).find("[id^='"+t+"']");return a||!1}function gfRepeater_getIndex(e,r,t,a){var i=[];return jQuery.each(e,function(e,n){if(n[r]==t&&(i.push(e),!a))return!1}),!!i.length&&(a?i:i[0])}function gfRepeater_getChoiceValue(e){var r=[];return jQuery(e).find(":checkbox, :radio").each(function(){if(1==jQuery(this).prop("checked")){this.id;var e=jQuery(this).siblings("label").first().text();r.push(e)}}),r}function gfRepeater_getInputValue(e){return e.is(":checkbox, :radio")?1==e.prop("checked"):e.val()}function gfRepeater_setInputValue(e,r){e.is(":checkbox, :radio")?"on"==r||e.prop("value")===r?e.prop("checked",!0):e.prop("checked",!1):e.val(r)}function gfRepeater_updateDataElement(e,r){var t=gfRepeater_repeater2s[e][r],a=jQuery(t.controllers.data),i=jQuery(a).val();if(i)try{i=JSON.parse(i)}catch(e){console.log("Error parsing dataArray in updateDataElement:",e),i=null}i||(i={repeater2Id:r,repeatCount:1,children:{}}),i.repeater2Id=r,i.repeatCount=t.data.repeatCount,i.children&&jQuery.each(i.children,function(e,r){Array.isArray(this)&&(i.children[e]={});var a=t.data.inputData[e];a&&a.length&&(i.children[e].inputs=a);gfRepeater_getIndex(t.children,"idNum",e)}),i=JSON.stringify(i),jQuery(a).val(i)}function gfRepeater_start(){jQuery.each(gfRepeater_repeater2s,function(e,r){var t=e,a=gfRepeater_select(t);jQuery.each(r,function(e,r){var a=e,i=gfRepeater_repeater2s[t][a],n=i.settings.start,p=i.data.paremCount;i.controllers.data.attr("data-required")&&i.controllers.start.addClass("gfield_contains_required"),jQuery.each(i.children,function(e,r){gfRepeater_setRepeaterChildAttrs(t,a,jQuery(i.children[e].element),1),this.conditionalLogic&&gfRepeater_conditionalLogic_set(t,a,e,1)}),gfRepeater_submitted?n=i.data.prevRepeatCount:p>n&&(n=p),gfRepeater_setRepeater(t,a,n),gfRepeater_updateRepeaterControls(t,a),gfRepeater_updateDataElement(t,a)}),jQuery(a).trigger("gform_repeater2_init_done")}),window.gformInitDatepicker&&gformInitDatepicker(),window.gformInitTimepicker&&gformInitTimepicker()}jQuery(document).bind("gform_post_render",function(){gfRepeater_getRepeaters()?(gfRepeater_start(),jQuery(window).trigger("gform_repeater2_init_done")):console.log("There was an error with one of your repeater2s. This is usually caused by forgetting to include a repeater2-end field or by trying to nest repeater2s.")});